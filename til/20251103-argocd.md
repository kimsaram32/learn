# 20251103 - Argo CD 관련 여러가지

## Argo CD

Argo CD는 GitOps 방식의 CD tool로 요약할 수 있다.

## 동작 방식

기본적으로 다음과 같이 동작한다.

1. 클러스터 내의 live state와 GitOps repo 상의 target state를 비교한다.
2. live state가 target state와 다르면, live state를 target state에 맞춰 sync 한다.
3. syncing 과정은 manual 또는 automatic 으로 지정할 수 있다.

## App of Apps pattern

App of Apps 패턴은 Argo CD에서 클러스터 boostrapping을 위해
사용하는 패턴이다.

application의 manifest 상에서 다른 application들을 지정한다.
즉 Argo CD에서 해당 application을 sync하는 과정에서,
다른 application들이 spawn 된다.

하나의 root application으로부터 계층적, 재귀적인 과정을 통해
전체 application 구조를 boostrap하는 형태이다.

## ApplicationSet

ApplicationSet은 Argo CD에서 지정하는 CRD이다.

해당 리소스의 controller는 리소스에서 지정한 대로
application을 동적으로 생성할 수 있다.

generator와 template 기반으로 생성한다.
generator는 파라미터 생성기라고 보면 될 듯...

## 비교

App of Apps는 계층적인 bootstrapping,
ApplicationSet은 체계화된 동적 생성이 핵심인 느낌이다.

근데 직접 써보면서 자세한 용도를 이해해봐야 할 듯 하다.

## Sources

- Argo CD Docs <https://argo-cd.readthedocs.io/en/stable/>
