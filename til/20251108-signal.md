# 20251108 - Signals

## Signals

시그널은 프로세스에게 보내지는 특정 이벤트에 대한 알림이라고 설명할 수 있다.
- 커널 또는 프로세스에서 발생시킬 수 있다. 보통 커널에서 발생시킨다.
- 프로세스에 시그널이 발생하면 프로세스에서 실행 중이던 작업을 중단한 후
  시그널을 처리한다. 이후 다시 실행 중이던 작업으로 돌아간다.
- 인터럽트와 비슷한 방식으로 동작한다고 할 수 있는 듯

## 시그널의 구분

- 각 시그널마다 numeric value를 가지며, 이를 통해 내부적으로 시그널을 구분한다.
- 시그널마다 이름이 있고, 사용자는 이를 통해 구분하면 된다
- numeric value는 architecture마다 다르나, 공유되는 것도 있다 (POSIX 표준..?) (e.g. signum 9 = SIGKILL)

## Disposition

프로세스에서 특정 시그널이 발생했을 때 실행되어야 할 동작을 disposition이라고 부른다.

시그널마다 기본 disposition을 가지며, 이는 다음 중 하나이다.
- 무시한다 (Ign).
- 프로세스를 종료한다 (Term).
- core dump 파일을 생성한 후 프로세스를 종료한다 (Core).
- 프로세스 실행을 중단한다 (Stop).
- 프로세스 실행을 재개한다 (Cont).

### `signal()`: disposition 설정하기

`signal(signum, handler)` 라이브러리 함수는 시그널에 대한 disposition을 설정한다.
- signum은 disposition을 설정할 시그널의 numeric value이다.
- handler는 `SIG_IGN`, `SIG_DFL`, 함수 포인터 중 하나이다.
  - `SIG_IGN`: 시그널을 무시하도록 설정한다.
  - `SIG_DFL`: 시그널의 기본 disposition으로 처리하도록 설정한다.
  - 함수 포인터: 시그널을 핸들링할 함수를 등록한다.
    해당 함수 포인터의 시그니처는 `void (*)(int signum)`이다.
- 성공 시 이전 disposition을, 실패 시 `SIG_ERR`를 반환한다.

구현마다 동작이 달라질 수 있어서 `sigaction()`을 쓰는 게 더 낫다고 한다.
다음에 알아보기

## Sources

- signal(2) man page
- signal(7) man page
- The Linux Programming Interface
